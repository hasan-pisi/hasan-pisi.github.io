<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Canlı Radyo & Yağmur Efekti</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

  /* Temel stiller */
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(to bottom, #1e3c72, #2a5298);
    font-family: 'Inter', Arial, sans-serif;
    color: #f0f0f0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    user-select: none;
  }

  h1 {
    font-weight: 700;
    font-size: 2.8rem;
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(0,0,0,0.6);
  }

  /* Butonlar */
  .controls {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
  }

  button {
    background: linear-gradient(45deg, #6dd3cf, #ff9aa2);
    border: none;
    border-radius: 50px;
    padding: 18px 40px;
    font-size: 1.3rem;
    font-weight: 700;
    color: #072827;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.25);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  button:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(109, 211, 207, 0.7);
  }

  /* Çalma süresi */
  #playTime {
    font-size: 1.2rem;
    font-weight: 600;
    text-shadow: 0 0 6px rgba(0,0,0,0.4);
    margin-bottom: 40px;
    font-family: monospace;
  }

  /* Yağmur damlaları */
  .rain {
    pointer-events: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
  }
  .raindrop {
    position: absolute;
    bottom: 100%;
    width: 2px;
    height: 15px;
    background: linear-gradient(180deg, #a0e9ff, #4da6ff);
    opacity: 0.6;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
  @keyframes fall {
    to {
      transform: translateY(110vh);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<h1><a href="https://masalfm.net">🎵 MasalFM.net </a></h1>

<div class="controls">
  <button id="playPauseBtn">▶ Oynat</button>
</div>

<div id="playTime">Çalma Süresi: 00:00</div>

<audio id="radio" src="http://radyoserver60.okeylisans.com:9314/;" preload="none"></audio>

<div class="rain" id="rain"></div>

<script>
  const audio = document.getElementById('radio');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const playTimeDisplay = document.getElementById('playTime');

  let playing = false;
  let startTime = 0;
  let timerInterval;

  // Yağmur damlası üret
  function createRaindrop() {
    const rain = document.getElementById('rain');
    const drop = document.createElement('div');
    drop.classList.add('raindrop');

    drop.style.left = Math.random() * 100 + 'vw';
    drop.style.animationDuration = (Math.random() * 1 + 0.7) + 's';
    drop.style.animationDelay = Math.random() * 5 + 's';

    rain.appendChild(drop);

    // Damlayı 5 saniye sonra kaldır
    setTimeout(() => {
      drop.remove();
    }, 5000);
  }

  // Sürekli damla üret
  setInterval(createRaindrop, 200);

  // Zamanı formatla: saniyeyi dak:sn olarak dönüştür
  function formatTime(seconds) {
    const m = Math.floor(seconds / 60).toString().padStart(2, '0');
    const s = Math.floor(seconds % 60).toString().padStart(2, '0');
    return `${m}:${s}`;
  }

  // Butona tıklanınca
  playPauseBtn.addEventListener('click', async () => {
    if (!playing) {
      try {
        await audio.play();
        playing = true;
        startTime = Date.now();
        playPauseBtn.textContent = '⏸ Durdur';

        timerInterval = setInterval(() => {
          const elapsed = (Date.now() - startTime) / 1000;
          playTimeDisplay.textContent = 'Çalma Süresi: ' + formatTime(elapsed);
        }, 1000);

      } catch(err) {
        alert('Yayın oynatılamadı. Tarayıcı kısıtlamaları veya bağlantı sorunları olabilir.');
        console.error(err);
      }
    } else {
      audio.pause();
      playing = false;
      playPauseBtn.textContent = '▶ Oynat';
      clearInterval(timerInterval);
    }
  });

  // Ses durursa (örn. yayın kesilirse) durumu güncelle
  audio.addEventListener('pause', () => {
    playing = false;
    playPauseBtn.textContent = '▶ Oynat';
    clearInterval(timerInterval);
  });
</script>

</body>
</html>


